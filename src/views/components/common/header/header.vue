<script setup lang="ts">
import { onBeforeUnmount, reactive, ref, watch } from "vue";
import HeaderDesktop from "./components/HeaderDesktop.vue";
import HeaderMobileTopBar from "./components/HeaderMobileTopBar.vue";
import HeaderMobileMenuDrawer from "./components/HeaderMobileMenuDrawer.vue";
import HeaderMobileAccountDrawer from "./components/HeaderMobileAccountDrawer.vue";

const state = reactive({
  menuItems: ["Overview", "Features", "Game", "Upgrades", "FAQ"],
  mobileMenuItems: ["Overview", "Features", "Game Upgrades", "FAQ"],
  blizzardQuickLinks: [
    {
      title: "Visit Blizzard.com",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 20" part="icon" aria-hidden="true"><path d="M8 1.7c.2.1.2.2.4.3h.2c.2.2.4.5.7.7v1.4c0 .1-.1.1-.2.2 0 .2.2.2.3.3v.6c0 .1-.1.1-.1.2v2.2c0 .2-.1.5 0 .7 0 .1.2.2.3.3 0 .1.1.3.1.5v2.5c0 .1-.1.1-.1.2-.1.3.1.7 0 .9 0 .1.1.1.1.2v.8l-.2.2-.1.2c0 .1.2.2.1.5 0 .1 0 .1-.1.2 0 .2.1.4 0 .6 0 .1-.1.1-.2.2-.1.2.1.6 0 .9 0 .1-.1.1-.1.2s.2.3.1.5h1c.1 0 .1-.1.2-.2s.2-.2.3-.2.3 0 .5.1c.3.1.9.2 1.2 0 .1 0 .1-.1.2-.2.2-.1.6-.1.9-.1 1.2-.1 2.7 0 3.9 0v1.8c0 .3.3.4.3.6h-1.9c-.1 0-.1-.1-.2-.2-.3 0-.5 0-.6-.2-.2 0-.3-.1-.4-.2h-.7c-.4 0-.8.1-.9-.2H9.5c-.1-.2-.5-.4-.8-.3-.1 0-.2.1-.4.2-.1.2-.3.2-.3.3-.1.1-.2.2-.2.3-.4-.1-.9-.2-1.3 0-.1 0-.1-.2-.2-.2 0-.1.2-.2.2-.3.2-.2.5-.4.8-.7v-.6c0-.1.1-.1.2-.2 0-.1-.1-.1-.2-.2.1-.4-.1-.7 0-1 0-.1.1-.1.2-.2v-.4c0-.1.1-.1.1-.2 0-.3-.2-.4-.3-.5v-1.9c0-.1.1-.1.2-.2 0-.3-.1-.7 0-1 0-.1.1-.1.1-.2V9.5c0-.2.2-.2.2-.4s-.1-.2-.2-.3v-2c0-.1-.1-.1-.1-.2v-1c0-.2.2-.2.3-.3 0-.4.2-1-.2-1.1 0-.2.2-.4.2-.7s-.2-.6-.3-.9h-.4c0-.2-.2-.4-.4-.5 0-.1-.3-.2-.3-.3 0 0 .2-.2.2-.3v-.1h.2c.1 0 .1.1.2.2.3.1.7.1 1 .1m15.5.2c0 .1-.1.2-.1.4-.1.3-.2.6-.5.9 0 .3 0 .5-.1.7-.1.1-.3.2-.3.4v.3c0 .2-.2.3-.3.4-.1.4-.1.9-.2 1.2-.1.1-.2.3-.2.4v1.5c0 .1-.1.1-.1.2-.1.2-.1.4-.2.6s-.1.4-.3.5v.5c-.1.2-.4.3-.4.6v1.6c0 .2-.1.4-.2.6s-.2.4-.2.6v.7c0 .5-.3.8-.5 1.2 0 .4-.2.6-.2.9.1.1.1-.1.2-.1.2.2.5 0 .8 0 .1-.2.1-.3.2-.5s.5-.2.7-.3c.1 0 .3-.2.4-.2.4-.2.7-.3.9-.7.1 0 .1.2.2.2.2.1.5-.1.6 0 .1 0 .3.3.3.4s-.1.2-.1.3v.3c0 .1.1.2.1.3v1.3c0 .1-.2.2-.2.3h-2.1c-.1 0-.1-.1-.2-.2-.2 0-.4-.1-.6-.1s-.3.3-.5.3c-.4.1-.8 0-1.2 0-.3 0-.5.3-.8.3-.1-.1-.1-.3-.1-.6v-.5c0-.1.2-.2.2-.3s0-.3-.1-.4c.1-.1.2-.1.3-.3v-.5c.1-.1.2-.1.2-.2v-.4c0-.1.1-.2.1-.3s.1-.3.1-.4c0-.2 0-.4-.1-.6 0-.1-.1-.2-.2-.3-.1-.3-.1-.8-.1-1.2s0-.8.1-1.2c0-.2.1-.4.2-.6.2-.5.4-1.1.6-1.6 0-.1-.1-.1-.1-.3s.1-.3.2-.4 0-.3 0-.4.1-.3.2-.4c.1-.2.2-.3.2-.5v-.5c0-.2.1-.3.2-.5.3-.3.5-.7.7-1l.2-.2v-.4c0-.1.1-.1.1-.2-.2-.2-.5 0-.8-.1-.1 0-.1-.2-.2-.2H20c-.1 0-.2 0-.3.1-.2.1-.3.7-.4 1-.1.4-.1.9-.4 1.1-.2.1-.3 0-.4.2-.1-.1-.2-.2-.3-.2 0-.1.1-.2.1-.3 0-.2-.1-.3-.1-.4s.2-.2.2-.3V1.9h4.8c.1 0 .1.1.1.2.1-.3.2-.3.2-.2" class="st0"></path><path d="M9.8 1.9c.8.1 1.9.1 2.6 0 .1.1.3.2.2.5-.3.1-.8.3-.7.7 0 .1.2.2.2.4s-.2.2-.2.4v.8c0 .9.1 1.8 0 2.7v.4c0 .1 0 .1.1.2 0 .2 0 .4.1.7-.1.1-.2.2-.3.4 0 .2 0 .8.1 1v.3c0 .1 0 .1.1.2v.5c0 .1-.2.2-.3.3 0 .1 0 .3.1.5 0 .2 0 .3.1.5 0 .1.1.2.1.3s.1.2.1.3v1c0 .1-.2.2-.2.3s.1.5.2.6.3.2.5.3.3.2.4.3c0 .2 0 .3.1.5-.2-.1-.5-.1-.7 0-.3-.1-.6-.1-1-.1-.2 0-.4 0-.6.1-.1.1-.2.3-.4.3s-.2-.2-.3-.2c.2-.2.4-.5.7-.7.1-.4.1-.9.1-1.4v-.5c0-.1.1-.1.1-.2s-.1-.2-.1-.4v-.5c0-.1.1-.2.1-.3V6.2c0-.1 0-.1.1-.2 0-.1-.1 0-.1-.1-.3-.9-.3-1.9-.4-2.8v-.4c-.1-.3-.5-.1-.6-.4h-.2l-.2-.2c0-.1.1-.1.2-.2" class="st0"></path><path d="M13.4 1.9c1.4-.1 2.8 0 4.2 0v.8c0 .1.1.2.1.3v2.6c0 .1-.1.1-.2.2-.1.2 0 .5 0 .7-.5.4-.6 1.2-.9 1.8v.6c-.4.2-.9.4-.7 1.2 0 .1-.1.1-.2.2-.2.2-.4.7-.6 1-.1.2-.2.4-.2.6-.1.2-.2.4-.2.6v.4c0 .1-.1.4-.2.5-.2.5-.3.9-.5 1.3 0 .1-.1.2-.1.2.2.1.3 0 .5-.1.1-.1.3-.2.4-.2h.3c.1 0 .2 0 .3-.1s.2-.3.3-.4c.2-.3.5-.7.9-.8.1-.3.1-.5.3-.6.1 0 .1.1.1.2.3-.1.3-.5.5-.7h.4c0 .3 0 .7.1.9 0 .1-.1.1-.2.1 0 0 0 .1-.1.2 0 .1-.1.1-.1.2-.1.6 0 1.4 0 2q-.45 0-.6.3h-1.5c-.1 0-.1-.1-.2-.2H15c-.2.1-.2.3-.4.3s-.4-.1-.5-.2h-1c-.1-.1-.2-.2-.2-.3s.1-.2.2-.3c0-.3-.1-.6 0-.8 0-.1.1-.1.1-.2 0-.2-.2-.5-.3-.6.1-.1.1-.2.1-.3s-.1-.2-.1-.3c-.1-.3 0-.6.1-.9 0-.2 0-.4.1-.5 0-.1.1-.2.1-.2.1-.2 0-.4.1-.6.1-.3.4-.5.5-.8q.15-.75.6-1.2c.1-.4.2-.9.3-1.3.1-.3.2-.5.5-.6.1-.3.4-.5.6-.7.2-.6.2-.9.3-1.2.1-.1.2-.1.2-.2.3-.3.5-.7.7-1v-.9h-1.5c-.1 0-.3.1-.4.2-.3.2-.5.4-.5.9-.3 0-.4.1-.6.3 0 .4.1.8 0 1.2 0 .1-.1.2-.2.3.2.1.1.2 0 .3-.1-.1-.2-.2-.2-.4 0-.1-.1-.1-.2-.2 0-.2-.1-.6-.1-.7.1-.3.2-.6.1-.9-.1-.1-.2-.2-.2-.3.1-.4-.1-.9 0-1.3.1-.2.2-.3.2-.4M5.1 7.3c.1.1.2.2.3.2s.4 0 .4.1c.2.3-.2.6-.1.8.1.1.1 0 .2 0 .1.1.2.4.4.5-.1.5-.2 1.2 0 1.6.1.2.2.2.3.3-.2.8.2 1.9-.1 2.6 0 .1-.2.2-.2.3s0 .3.1.4q.15.45 0 .9c0 .1-.1.3-.2.4-.1.3-.3.5-.4.7-.1.3-.1.6-.2 1-.4.2-.8.4-1.1.6-.2.3-.4.4-.5.6-.4.1-.8.1-1.1.3-.1 0-.2-.2-.3-.2s-.2.2-.3.2h-.4c-.3 0-.5 0-.8-.1-.1.1-.3 0-.5 0H.5l-.1.1c-.1 0-.2-.2-.3-.3.2-.1.4-.1.5-.3.1-.4.3-.8.3-1.2v-.5c0-.3.1-.7.1-1.1 0-.7-.1-1.3-.2-2 0-.9.1-1.8 0-2.7 0-.1.2-.1.2-.1v-.7c0-.1-.1-.2-.1-.2v-1c0-.1.1-.2.2-.3.1-.3 0-.5-.2-.7V4.9c0-.3-.1-.6 0-.9 0-.1.1-.1.2-.2v-.4c-.1-.1-.2 0-.3 0s0-.1-.1-.2C.6 3 .3 2.9.2 2.7c-.1 0-.1-.1-.2-.2v-.3c0-.1.2-.2.2-.2h.7c.1 0 .3-.1.4-.1.7-.2 1.7-.1 2.6-.2h.9c.1.1.1.2.2.3 0 .1.2.1.3.2.5 0 .7.3.9.6.1.2.3.5.3.8v.6c0 .3.1.5 0 .8 0 .1-.1.2-.2.3-.4.7-.8 1.6-1.2 2M3.3 3.9c0 .1-.1.1-.1.2v2.6h.3c.2-.1.2-.3.3-.5s.4-.3.7-.4c0-.4-.1-.9.1-1.2-.1-.1-.1-.2-.1-.4 0-.1.2-.1.2-.2h-.4c-.1-.1-.2-.3-.3-.3-.2-.1-.4.1-.6 0 0 0 .1-.1 0-.1 0 .1-.1.2-.1.3m-.1 5.9c0 .1-.1.1-.1.2-.1.3.1.6.1.9 0 .2-.1.4-.1.7-.1 0-.2.1-.2.2s.1.1.2.2v2.6c-.1.1-.2.2-.2.4v1.1c0 .2 0 .4.1.5-.1.2-.2.3-.2.5.4 0 .5-.3.8-.4.1-.4.2-.6.4-.7l.2-.2c.2-.3 0-.7.1-1.1.2-.3.3-.8.3-1.3 0-.1-.1-.1-.1-.1.2-.1.1-.3 0-.5s-.1-.3-.1-.5c0-.1.1-.1.2-.2.1-.3-.1-.4-.2-.5-.1-.3.1-.6.1-.9 0-.1-.1-.1-.1-.1.2-.2-.1-.5-.1-.6h.1c-.1-.2-.1-.3-.1-.4s.1-.1.1-.2c-.2-.1-.3-.2-.5-.4-.2-.1-.5-.4-.7-.6 0 .5.1.9 0 1.4" class="st0"></path></svg>`,
    },
    {
      title: "All Games",
      svg: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24" part="icon" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 3H3v7h7zm11 0h-7v7h7zm0 11h-7v7h7zm-11 0H3v7h7z"></path></svg>`,
    },
  ],
  blizzardSuggestions: [
    {
      title: "World of Warcraft: Midnight",
      type: "Expansion",
      badge: "UPCOMING",
      icon: `<svg width="48" height="48" viewBox="-4 -5 56 56" fill="none" xmlns="http://www.w3.org/2000/svg" part="icon" aria-hidden="true">
<path d="M23.9988 3.60059C35.2648 3.60059 44.3971 12.7352 44.3971 23.9989C44.3971 35.2649 35.2648 44.3996 24.0011 44.3996C12.7374 44.3996 3.60274 35.2649 3.59814 23.9989C3.60274 12.7352 12.7374 3.60059 23.9988 3.60059Z" fill="#1F056B"></path>
<path d="M11.006 14.4441L16.2435 36.9715C16.3769 37.9556 15.6204 38.8913 14.8732 39.7328H23.256C22.941 38.9212 22.6628 38.1855 22.6651 37.2497L24.4723 29.0255C24.9988 31.4857 25.4954 33.9159 26.0288 36.3783C26.3392 37.4957 26.1438 38.7419 25.6771 39.7305H34.0162C33.5793 38.9557 32.9126 37.8406 33.0712 36.6565L36.3407 16.7755C36.904 14.9706 37.8673 13.3175 38.9594 11.761C36.2786 11.7955 33.4736 11.6966 30.8893 11.8254C31.917 12.7887 31.202 14.3453 31.1077 15.4995L28.643 30.4533C28.6108 30.4234 28.5533 30.3913 28.5832 30.297L24.3113 13.4693C22.787 19.0241 21.6949 24.7192 20.0441 30.2372L19.982 30.1406L16.8367 15.0603L16.9907 11.7633H9.04248C10.0748 12.2921 10.6312 13.4486 11.006 14.4395V14.4441Z" fill="#715BEB"></path>
<path d="M8.4058 42.2383C12.5995 45.8296 18.0486 47.9954 23.9988 48C29.956 48 35.4028 45.8273 39.5942 42.2383H44.8018V35.9753C46.8297 32.4506 48 28.3604 48 23.9989C48 19.6396 46.832 15.5494 44.8018 12.0201V5.75945H39.5942C35.4005 2.17273 29.9537 0 24.0012 0C18.0486 0 12.5949 2.17273 8.40351 5.75945H3.20046V12.0201C1.16339 15.5448 0 19.635 0 23.9989C0 28.3627 1.16339 32.4506 3.20046 35.9776V42.2383H8.4058ZM23.9988 3.60052C35.2648 3.60052 44.3972 12.7352 44.3972 23.9989C44.3972 35.2648 35.2648 44.3995 24.0012 44.3995C12.7375 44.3995 3.60282 35.2648 3.59822 23.9989C3.60282 12.7352 12.7375 3.60052 23.9988 3.60052Z" fill="#715BEB"></path>
</svg>`,
      iconClass: "bg-[#4a35c7]",
    },
    {
      title: "World of Warcraft",
      type: "MMORPG",
      badge: "",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" aria-labelledby="blz-icon-title-world-of-warcraft" viewBox="0 1 48 48" part="icon"><title id="blz-icon-title-world-of-warcraft">World of Warcraft</title><path fill="#2B374C" fill-rule="evenodd" d="M24 8.848c8.8 0 16 7.255 16 16.121 0 8.867-7.2 16.121-16 16.121S8 33.836 8 24.97 15.2 8.847 24 8.847" clip-rule="evenodd"></path><path fill="#F4BF2A" fill-rule="evenodd" d="M44 24.97c0-4.031-1.2-8.061-3.6-11.487V8.647c0-.202-.2-.202-.2-.202h-4.8c-6.8-4.635-15.8-4.635-22.6 0H7.6v5.038c-4.8 6.851-4.8 16.12 0 22.972v4.837c0 .201.2.201.2.201h4.8c6.8 4.635 15.8 4.635 22.8 0h4.8c.2 0 .2-.202.2-.403v-4.836c2.4-3.224 3.6-7.255 3.6-11.285m-37.4-.001c0-9.673 7.8-17.531 17.4-17.531s17.4 7.859 17.4 17.531C41.4 34.641 33.6 42.5 24 42.5S6.6 34.64 6.6 24.969" clip-rule="evenodd"></path><path fill="#F4BF2A" fill-rule="evenodd" d="M12.4 15.498H19c-.2.806-.2 1.612-.2 2.418C19 20.94 21 29 21 29l3-12.695 3.2 12.292s2-10.881 2-11.687c0-.605-.4-1.008-.8-1.411h7c-1 .806-1.6 2.015-2 3.224-.6 2.418-2.8 14.509-2.8 15.315s.4 1.612.8 2.217H25c.2-.605.2-1.21.2-1.814 0-1.209-1-6.448-1-6.448s-1.4 5.44-1.4 6.448c0 .605.2 1.21.4 1.814h-6.6s1.2-1.008 1.2-1.814c-.2-2.418-3.6-15.315-3.8-16.322 0-1.008-.6-2.015-1.6-2.62" clip-rule="evenodd"></path></svg>`,
      iconClass: "bg-[#d6a300]",
    },
    {
      title: "Warcraft Rumble",
      type: "Mobile Action Strategy",
      badge: "",
      icon: `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none" aria-labelledby="blz-icon-title-warcraft-arclight-rumble" viewBox="0 1 48 48" part="icon"><title id="blz-icon-title-warcraft-arclight-rumble">Warcraft Rumble</title><g clip-path="url(#clip0_3528_142)"><path fill="#CB9B2E" d="M26 12.14a15.9 15.9 0 0 1 5.62 2.29l4.67-3-7.46-4.35-.61-4.28H20.5l-1.146 4.406 6.368 4.904s.127 0 .278.03m-2-7.26a2.08 2.08 0 1 1 0 4.16 2.08 2.08 0 0 1 0-4.16m18 15.2 3.22-2.78-2.7-4.82-5.766 8.125 5.27 4.058zM6.321 24.103l4.062 3.128-.058.073L4.33 34.86l-1.5-3.11 3.67-2.67zM24.26 37.918q-.536-.001-1.07-.049l-2.7 3.18-1.29-4.08c-.88-.46-1.712-1.01-2.48-1.64l-1.23-1-5.07 3.08 9.08 5.31.61 4.28h8l.72-4.28.958-.544zm-.26 7.43a2.08 2.08 0 1 1 0-4.159 2.08 2.08 0 0 1 0 4.16"></path><path fill="#F3C029" fill-rule="evenodd" d="m19.354 7.206-.024.093-8.11 4.84-4.72-.67-3.33 5.67 3 2.77.151 4.194 4.062 3.128 1.287-1.622a10.59 10.59 0 0 1 2.27-8.58 13.54 13.54 0 0 1 11.782-4.92zM8.5 18.129a2.081 2.081 0 1 1-.02-4.162 2.081 2.081 0 0 1 .02 4.162m28.254 2.476-.294.414s2.79 6.48-3.4 13.17a12.2 12.2 0 0 1-8.801 3.728l5.529 4.258 7.652-4.346 4.67.45 3.16-5.56-3.22-3-.026-5.056zm2.496 15.054a2.08 2.08 0 1 1 0-4.161 2.08 2.08 0 0 1 0 4.161" clip-rule="evenodd"></path><path fill="#65FAFF" d="m7.12 36.009 15.05-19.04 1.5 6.72 14.07-9.91-15.82 21.08-1.52-6.71z"></path><path fill="#1783FC" d="m23 12.719 1.71 7.81 18.6-11.84-22.42 30.17-1.64-8.06-18 10.39zm-.83 4.25L7.12 36.009l13.28-7.86 1.52 6.71 15.82-21.08-14.07 9.91z"></path></g><defs><clipPath id="clip0_3528_142"><path fill="#fff" d="M0 .97h48v48H0z"></path></clipPath></defs></svg>`,
      iconClass: "bg-[#0ea5d7]",
    },
  ],
});

const isMobileMenuOpen = ref(false);
const isAccountMenuOpen = ref(false);

const closeMobileMenu = () => {
  isMobileMenuOpen.value = false;
};

const toggleMobileMenu = () => {
  if (isAccountMenuOpen.value) {
    isAccountMenuOpen.value = false;
  }
  isMobileMenuOpen.value = !isMobileMenuOpen.value;
};

const closeAccountMenu = () => {
  isAccountMenuOpen.value = false;
};

const toggleAccountMenu = () => {
  if (isMobileMenuOpen.value) {
    isMobileMenuOpen.value = false;
  }
  isAccountMenuOpen.value = !isAccountMenuOpen.value;
};

watch(
  [isMobileMenuOpen, isAccountMenuOpen],
  ([isMobileOpen, isAccountOpen]) => {
    document.body.style.overflow =
      isMobileOpen || isAccountOpen ? "hidden" : "";
  },
);

onBeforeUnmount(() => {
  document.body.style.overflow = "";
});
</script>
<template>
  <header
    class="bg-[#1f4639] max-w-[1800px] mx-auto min-h-[56px] lg:min-h-[72px] rounded-none lg:rounded-[8px] sticky top-0 lg:top-4 z-[99999]"
  >
    <HeaderDesktop
      :menu-items="state.menuItems"
      :blizzard-quick-links="state.blizzardQuickLinks"
      :blizzard-suggestions="state.blizzardSuggestions"
    />

    <HeaderMobileTopBar
      @toggle-mobile-menu="toggleMobileMenu"
      @toggle-account-menu="toggleAccountMenu"
    />

    <HeaderMobileMenuDrawer
      v-if="isMobileMenuOpen"
      :mobile-menu-items="state.mobileMenuItems"
      :blizzard-quick-links="state.blizzardQuickLinks"
      :blizzard-suggestions="state.blizzardSuggestions"
      @close="closeMobileMenu"
    />

    <HeaderMobileAccountDrawer
      v-if="isAccountMenuOpen"
      @close="closeAccountMenu"
    />
  </header>
</template>
